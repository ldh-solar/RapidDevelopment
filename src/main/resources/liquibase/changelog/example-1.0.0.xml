<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd">

    <changeSet id="1.0.0-20200910-001" author="blank">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="t_user"/>
            </not>
        </preConditions>
        <comment>创建用户表</comment>
        <sql dbms="mysql">
            CREATE TABLE `t_user` (
            `id` bigint(20) NOT NULL AUTO_INCREMENT,
            `username` varchar(255) DEFAULT NULL COMMENT '用户名',
            `nickname` varchar(255) DEFAULT NULL COMMENT '昵称',
            `password` varchar(255) DEFAULT NULL COMMENT '密码',
            `is_del` bit(1) NOT NULL DEFAULT b'0' COMMENT '是否删除',
            `version` int(11) NOT NULL DEFAULT '0' COMMENT '版本',
            `create_date` datetime DEFAULT NULL COMMENT '创建时间',
            `create_user` varchar(255) DEFAULT NULL COMMENT '创建人',
            `update_date` datetime DEFAULT NULL COMMENT '更新时间',
            `update_user` varchar(255) DEFAULT NULL COMMENT '更新人',
            PRIMARY KEY (`id`),
            UNIQUE KEY `t_user_username_uindex` (`username`)
            ) ENGINE=InnoDB COMMENT='用户表';

            INSERT INTO `t_user` VALUES
            (1,'blank','blank','15eb1a916b64f0e60398981679d12143d28ec8b044105f67',b'0',0,'2019-01-06 15:05:21','blank','2019-08-23 17:32:02','blank');
        </sql>
    </changeSet>

    <changeSet id="1.0.0-20200910-002" author="blank">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="t_file"/>
            </not>
        </preConditions>
        <comment>创建文件表</comment>
        <sql dbms="mysql">
            CREATE TABLE `t_file` (
            `id` bigint(20) NOT NULL AUTO_INCREMENT,
            `filename` varchar(255) DEFAULT NULL COMMENT '文件名',
            `url` varchar(255) DEFAULT NULL COMMENT '地址',
            `file_path` varchar(512) DEFAULT NULL COMMENT '保存路径',
            `size` bigint(20) DEFAULT '0' COMMENT '文件大小',
            `is_del` bit(1) NOT NULL DEFAULT b'0' COMMENT '是否删除',
            `version` int(11) NOT NULL DEFAULT '0' COMMENT '版本',
            `create_date` datetime DEFAULT NULL COMMENT '创建时间',
            `create_user` varchar(255) DEFAULT NULL COMMENT '创建人',
            `update_date` datetime DEFAULT NULL COMMENT '更新时间',
            `update_user` varchar(255) DEFAULT NULL COMMENT '更新人',
            PRIMARY KEY (`id`)
            ) ENGINE=InnoDB COMMENT='文件表';
        </sql>
    </changeSet>

    <changeSet id="1.0.0-20200910-003" author="blank">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="t_dictionary"/>
            </not>
        </preConditions>
        <comment>创建数据字典表</comment>
        <sql dbms="mysql">
            CREATE TABLE `t_dictionary` (
            `id` bigint(20) NOT NULL AUTO_INCREMENT,
            `name` varchar(255) DEFAULT NULL COMMENT '字典名',
            `is_del` bit(1) NOT NULL DEFAULT b'0' COMMENT '是否删除',
            `version` int(11) NOT NULL DEFAULT '0' COMMENT '版本',
            `create_date` datetime DEFAULT NULL COMMENT '创建时间',
            `create_user` varchar(255) DEFAULT NULL COMMENT '创建人',
            `update_date` datetime DEFAULT NULL COMMENT '更新时间',
            `update_user` varchar(255) DEFAULT NULL COMMENT '更新人',
            `value` varchar(255) DEFAULT NULL COMMENT '值',
            `pid` bigint(20) DEFAULT NULL COMMENT '上级id',
            PRIMARY KEY (`id`)
            ) ENGINE=InnoDB COMMENT='数据字典';
        </sql>
    </changeSet>

    <changeSet id="1.0.0-20200910-004" author="blank">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="t_permission"/>
            </not>
        </preConditions>
        <comment>创建权限表</comment>
        <sql dbms="mysql">
            CREATE TABLE `t_permission` (
            `id` bigint(20) NOT NULL AUTO_INCREMENT,
            `name` varchar(255) DEFAULT NULL COMMENT '权限名',
            `authority` varchar(255) DEFAULT NULL COMMENT '权限编码',
            `type` varchar(255) DEFAULT NULL COMMENT '权限类型',
            `pid` bigint(20) DEFAULT NULL COMMENT '父节点id',
            `is_del` bit(1) NOT NULL DEFAULT b'0' COMMENT '是否删除',
            `version` int(11) NOT NULL DEFAULT '0' COMMENT '版本',
            `create_date` datetime DEFAULT NULL COMMENT '创建时间',
            `create_user` varchar(255) DEFAULT NULL COMMENT '创建人',
            `update_date` datetime DEFAULT NULL COMMENT '更新时间',
            `update_user` varchar(255) DEFAULT NULL COMMENT '更新人',
            PRIMARY KEY (`id`)
            ) ENGINE=InnoDB COMMENT='权限表';

            INSERT INTO `t_permission` (id,name,authority,type,pid) VALUES
            (1,'用户列表','user:list','menu',4),
            (2,'设置角色(按钮)','user:list:setRole','button',1),
            (3,'角色管理','role:list','menu',4),
            (4,'系统设置','system','menu',0),
            (5,'权限配置','permission:list','menu',4),
            (6,'编辑(按钮)','user:list:edit','button',1),
            (7,'删除(按钮)','user:list:delete','button',1),
            (8,'文件上传','upload','menu',4),
            (9,'数据字典','dictionary:list','menu',4),
            (10,'日志','userLog:list','menu',4),
            (11,'删除(按钮)','role:list:delete','button',3),
            (12,'设置权限(按钮)','role:list:setPermission','button',3),
            (13,'编辑(按钮)','role:list:edit','button',3);

        </sql>
    </changeSet>

    <changeSet id="1.0.0-20200910-005" author="blank">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="t_role"/>
            </not>
        </preConditions>
        <comment>创建角色表</comment>
        <sql dbms="mysql">
            CREATE TABLE `t_role` (
            `id` bigint(20) NOT NULL AUTO_INCREMENT,
            `name` varchar(255) DEFAULT NULL COMMENT '角色名',
            `remark` varchar(255) DEFAULT NULL COMMENT '备注',
            `is_del` bit(1) NOT NULL DEFAULT b'0' COMMENT '是否删除',
            `version` int(11) NOT NULL DEFAULT '0' COMMENT '版本',
            `create_date` datetime DEFAULT NULL COMMENT '创建时间',
            `create_user` varchar(255) DEFAULT NULL COMMENT '创建人',
            `update_date` datetime DEFAULT NULL COMMENT '更新时间',
            `update_user` varchar(255) DEFAULT NULL COMMENT '更新人',
            PRIMARY KEY (`id`)
            ) ENGINE=InnoDB COMMENT='角色表';

            INSERT INTO `t_role` VALUES (1,'超级管理员','超级管理员',b'0',0,'2019-01-06 14:53:07','blank','2019-01-06 14:53:08','blank');
        </sql>
    </changeSet>

    <changeSet id="1.0.0-20200910-006" author="blank">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="t_role_permission"/>
            </not>
        </preConditions>
        <comment>创建角色权限中间表</comment>
        <sql dbms="mysql">
            CREATE TABLE `t_role_permission` (
            `id` bigint(20) NOT NULL AUTO_INCREMENT,
            `role_id` bigint(20) DEFAULT NULL,
            `permission_id` bigint(20) DEFAULT NULL,
            `is_del` bit(1) NOT NULL DEFAULT b'0' COMMENT '是否删除',
            `version` int(11) NOT NULL DEFAULT '0' COMMENT '版本',
            `create_date` datetime DEFAULT NULL COMMENT '创建时间',
            `create_user` varchar(255) DEFAULT NULL COMMENT '创建人',
            `update_date` datetime DEFAULT NULL COMMENT '更新时间',
            `update_user` varchar(255) DEFAULT NULL COMMENT '更新人',
            `icon` varchar(155) DEFAULT NULL COMMENT '图标',
            `cache` varchar(20) DEFAULT NULL COMMENT '是否缓存',
            `component` varchar(255) DEFAULT NULL COMMENT '组件',
            PRIMARY KEY (`id`)
            ) ENGINE=InnoDB COMMENT='角色权限中间表';

            INSERT INTO `t_role_permission` (id,role_id,permission_id) VALUES
            (1,1,1),
            (2,1,2),
            (3,1,3),
            (4,1,4),
            (5,1,5),
            (6,1,6),
            (7,1,7),
            (8,1,8),
            (9,1,9),
            (10,1,10),
            (11,1,11),
            (12,1,12),
            (13,1,13);

        </sql>
    </changeSet>

    <changeSet id="1.0.0-20200910-007" author="blank">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="t_user_log"/>
            </not>
        </preConditions>
        <comment>创建用户日志表</comment>
        <sql dbms="mysql">
            CREATE TABLE `t_user_log` (
            `id` bigint(20) NOT NULL AUTO_INCREMENT,
            `user_id` bigint(20) NOT NULL COMMENT '用户id',
            `login_ip` varchar(100) DEFAULT NULL COMMENT 'ip地址',
            `log_desc` varchar(4096) DEFAULT NULL COMMENT '描述',
            `log_type` varchar(50) DEFAULT NULL COMMENT '类型',
            `args` varchar(4096) DEFAULT NULL COMMENT '参数',
            `method_name` varchar(512) DEFAULT NULL COMMENT '方法名',
            `runTime` bigint(20) DEFAULT NULL COMMENT '运行时间',
            `is_del` bit(1) NOT NULL DEFAULT b'0' COMMENT '是否删除',
            `version` int(11) NOT NULL DEFAULT '0' COMMENT '版本',
            `create_date` datetime DEFAULT NULL COMMENT '创建时间',
            `create_user` varchar(255) DEFAULT NULL COMMENT '创建人',
            `update_date` datetime DEFAULT NULL COMMENT '更新时间',
            `update_user` varchar(255) DEFAULT NULL COMMENT '更新人',
            PRIMARY KEY (`id`)
            ) ENGINE=InnoDB COMMENT='用户日志表';
        </sql>
    </changeSet>

    <changeSet id="1.0.0-20200910-008" author="blank">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="t_user_role"/>
            </not>
        </preConditions>
        <comment>创建用户角色中间表</comment>
        <sql dbms="mysql">
            CREATE TABLE `t_user_role` (
            `id` bigint(20) NOT NULL AUTO_INCREMENT,
            `role_id` bigint(20) DEFAULT NULL,
            `user_id` bigint(20) DEFAULT NULL,
            `is_del` bit(1) NOT NULL DEFAULT b'0' COMMENT '是否删除',
            `version` int(11) NOT NULL DEFAULT '0' COMMENT '版本',
            `create_date` datetime DEFAULT NULL COMMENT '创建时间',
            `create_user` varchar(255) DEFAULT NULL COMMENT '创建人',
            `update_date` datetime DEFAULT NULL COMMENT '更新时间',
            `update_user` varchar(255) DEFAULT NULL COMMENT '更新人',
            PRIMARY KEY (`id`)
            ) ENGINE=InnoDB COMMENT='用户角色中间表';

            INSERT INTO `t_user_role` (id,role_id,user_id) VALUES (1,1,1);
        </sql>
    </changeSet>

</databaseChangeLog>
